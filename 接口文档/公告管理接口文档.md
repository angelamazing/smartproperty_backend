# å…¬å‘Šç®¡ç†æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å…¬å‘Šç®¡ç†ç³»ç»Ÿçš„æ‰€æœ‰APIæ¥å£ï¼ŒåŒ…æ‹¬å…¬å‘Šçš„å¢åˆ æ”¹æŸ¥ã€å‘å¸ƒç®¡ç†ç­‰åŠŸèƒ½ã€‚

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-27  
**é€‚ç”¨èŒƒå›´**: å‰ç«¯å¼€å‘äººå‘˜ã€åç«¯å¼€å‘äººå‘˜

---

## ğŸ” è®¤è¯è¯´æ˜

æ‰€æœ‰å…¬å‘Šç®¡ç†æ¥å£éƒ½éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦æœ‰æ•ˆçš„JWT Tokenï¼š

```http
Authorization: Bearer <your-jwt-token>
```

---

## ğŸ“ æ¥å£åˆ—è¡¨

### 1. è·å–å…¬å‘Šåˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/admin/notices`

**åŠŸèƒ½æè¿°**: è·å–å…¬å‘Šåˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰å’Œæœç´¢

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | number | å¦ | 1 | é¡µç  |
| pageSize | number | å¦ | 20 | æ¯é¡µæ•°é‡ |
| status | string | å¦ | - | çŠ¶æ€ç­›é€‰ï¼šdraft(è‰ç¨¿)ã€published(å·²å‘å¸ƒ)ã€archived(å·²å½’æ¡£) |
| type | string | å¦ | - | ç±»å‹ç­›é€‰ï¼šinfo(ä¿¡æ¯)ã€warning(è­¦å‘Š)ã€error(é”™è¯¯)ã€success(æˆåŠŸ) |
| keyword | string | å¦ | - | å…³é”®è¯æœç´¢ï¼ˆæ ‡é¢˜æˆ–å†…å®¹ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```http
GET /api/admin/notices?page=1&pageSize=10&status=published&type=info&keyword=ç³»ç»Ÿ
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–å…¬å‘Šåˆ—è¡¨æˆåŠŸ",
  "data": {
    "records": [
      {
        "_id": "notice-001",
        "title": "ç³»ç»Ÿç»´æŠ¤é€šçŸ¥",
        "content": "ç³»ç»Ÿå°†äºä»Šæ™š22:00-24:00è¿›è¡Œç»´æŠ¤...",
        "type": "warning",
        "priority": 5,
        "status": "published",
        "startTime": "2025-01-27T14:00:00.000Z",
        "endTime": "2025-01-28T02:00:00.000Z",
        "isSticky": true,
        "viewCount": 0,
        "publisherId": "admin-001",
        "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
        "publishTime": "2025-01-27T02:51:39.000Z",
        "createTime": "2025-01-27T02:51:39.000Z",
        "updateTime": "2025-01-27T02:51:39.000Z"
      }
    ],
    "total": 15,
    "page": 1,
    "pageSize": 10,
    "hasMore": true,
    "totalPages": 2
  }
}
```

---

### 2. è·å–å…¬å‘Šè¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/admin/notices/:noticeId`

**åŠŸèƒ½æè¿°**: è·å–æŒ‡å®šå…¬å‘Šçš„è¯¦ç»†ä¿¡æ¯

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| noticeId | string | æ˜¯ | å…¬å‘ŠID |

**è¯·æ±‚ç¤ºä¾‹**:
```http
GET /api/admin/notices/notice-001
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–å…¬å‘Šè¯¦æƒ…æˆåŠŸ",
  "data": {
    "_id": "notice-001",
    "title": "ç³»ç»Ÿç»´æŠ¤é€šçŸ¥",
    "content": "ç³»ç»Ÿå°†äºä»Šæ™š22:00-24:00è¿›è¡Œç»´æŠ¤ï¼ŒæœŸé—´å¯èƒ½å½±å“æ­£å¸¸ä½¿ç”¨ï¼Œè¯·æå‰åšå¥½å‡†å¤‡ã€‚",
    "type": "warning",
    "priority": 5,
    "status": "published",
    "startTime": "2025-01-27T14:00:00.000Z",
    "endTime": "2025-01-28T02:00:00.000Z",
    "targetUsers": ["user1", "user2"],
    "isSticky": true,
    "viewCount": 0,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": "2025-01-27T02:51:39.000Z",
    "createTime": "2025-01-27T02:51:39.000Z",
    "updateTime": "2025-01-27T02:51:39.000Z"
  }
}
```

---

### 3. åˆ›å»ºå…¬å‘Š

**æ¥å£åœ°å€**: `POST /api/admin/notices`

**åŠŸèƒ½æè¿°**: åˆ›å»ºæ–°çš„å…¬å‘Š

**è¯·æ±‚ä½“**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | string | æ˜¯ | å…¬å‘Šæ ‡é¢˜ï¼ˆæœ€å¤§200å­—ç¬¦ï¼‰ |
| content | string | æ˜¯ | å…¬å‘Šå†…å®¹ |
| type | string | å¦ | å…¬å‘Šç±»å‹ï¼šinfo(ä¿¡æ¯)ã€warning(è­¦å‘Š)ã€error(é”™è¯¯)ã€success(æˆåŠŸ)ï¼Œé»˜è®¤info |
| priority | number | å¦ | ä¼˜å…ˆçº§ï¼ˆ0-10ï¼‰ï¼Œé»˜è®¤0 |
| status | string | å¦ | çŠ¶æ€ï¼šdraft(è‰ç¨¿)ã€published(å·²å‘å¸ƒ)ã€archived(å·²å½’æ¡£)ï¼Œé»˜è®¤draft |
| startTime | string | å¦ | å¼€å§‹æ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |
| endTime | string | å¦ | ç»“æŸæ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |
| isSticky | boolean | å¦ | æ˜¯å¦ç½®é¡¶ï¼Œé»˜è®¤false |
| targetUsers | array | å¦ | ç›®æ ‡ç”¨æˆ·IDæ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**:
```http
POST /api/admin/notices
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json

{
  "title": "æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥",
  "content": "èœå“ç®¡ç†åŠŸèƒ½å·²å…¨æ–°ä¸Šçº¿ï¼Œæ”¯æŒèœå“åˆ†ç±»ã€å›¾ç‰‡ä¸Šä¼ ã€æ‰¹é‡æ“ä½œç­‰æ–°ç‰¹æ€§ã€‚",
  "type": "info",
  "priority": 3,
  "status": "draft",
  "startTime": "2025-01-27T00:00:00.000Z",
  "endTime": "2025-12-31T23:59:59.000Z",
  "isSticky": false,
  "targetUsers": ["user1", "user2"]
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å…¬å‘Šåˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "notice-002",
    "title": "æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥",
    "content": "èœå“ç®¡ç†åŠŸèƒ½å·²å…¨æ–°ä¸Šçº¿ï¼Œæ”¯æŒèœå“åˆ†ç±»ã€å›¾ç‰‡ä¸Šä¼ ã€æ‰¹é‡æ“ä½œç­‰æ–°ç‰¹æ€§ã€‚",
    "type": "info",
    "priority": 3,
    "status": "draft",
    "startTime": "2025-01-27T00:00:00.000Z",
    "endTime": "2025-12-31T23:59:59.000Z",
    "isSticky": false,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": null,
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:00:00.000Z"
  }
}
```

---

### 4. æ›´æ–°å…¬å‘Š

**æ¥å£åœ°å€**: `PUT /api/admin/notices/:noticeId`

**åŠŸèƒ½æè¿°**: æ›´æ–°æŒ‡å®šå…¬å‘Šçš„ä¿¡æ¯

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| noticeId | string | æ˜¯ | å…¬å‘ŠID |

**è¯·æ±‚ä½“**: ä¸åˆ›å»ºå…¬å‘Šç›¸åŒï¼Œæ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„

**è¯·æ±‚ç¤ºä¾‹**:
```http
PUT /api/admin/notices/notice-002
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json

{
  "title": "æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥ï¼ˆæ›´æ–°ï¼‰",
  "priority": 5,
  "isSticky": true
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å…¬å‘Šæ›´æ–°æˆåŠŸ",
  "data": {
    "_id": "notice-002",
    "title": "æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥ï¼ˆæ›´æ–°ï¼‰",
    "content": "èœå“ç®¡ç†åŠŸèƒ½å·²å…¨æ–°ä¸Šçº¿ï¼Œæ”¯æŒèœå“åˆ†ç±»ã€å›¾ç‰‡ä¸Šä¼ ã€æ‰¹é‡æ“ä½œç­‰æ–°ç‰¹æ€§ã€‚",
    "type": "info",
    "priority": 5,
    "status": "draft",
    "startTime": "2025-01-27T00:00:00.000Z",
    "endTime": "2025-12-31T23:59:59.000Z",
    "isSticky": true,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": null,
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:05:00.000Z"
  }
}
```

---

### 5. åˆ é™¤å…¬å‘Š

**æ¥å£åœ°å€**: `DELETE /api/admin/notices/:noticeId`

**åŠŸèƒ½æè¿°**: åˆ é™¤æŒ‡å®šå…¬å‘Š

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| noticeId | string | æ˜¯ | å…¬å‘ŠID |

**è¯·æ±‚ç¤ºä¾‹**:
```http
DELETE /api/admin/notices/notice-002
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å…¬å‘Šåˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

### 6. å‘å¸ƒå…¬å‘Š

**æ¥å£åœ°å€**: `POST /api/admin/notices/:noticeId/publish`

**åŠŸèƒ½æè¿°**: å‘å¸ƒæŒ‡å®šå…¬å‘Š

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| noticeId | string | æ˜¯ | å…¬å‘ŠID |

**è¯·æ±‚ç¤ºä¾‹**:
```http
POST /api/admin/notices/notice-002/publish
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å…¬å‘Šå‘å¸ƒæˆåŠŸ",
  "data": {
    "_id": "notice-002",
    "title": "æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥ï¼ˆæ›´æ–°ï¼‰",
    "content": "èœå“ç®¡ç†åŠŸèƒ½å·²å…¨æ–°ä¸Šçº¿ï¼Œæ”¯æŒèœå“åˆ†ç±»ã€å›¾ç‰‡ä¸Šä¼ ã€æ‰¹é‡æ“ä½œç­‰æ–°ç‰¹æ€§ã€‚",
    "type": "info",
    "priority": 5,
    "status": "published",
    "startTime": "2025-01-27T00:00:00.000Z",
    "endTime": "2025-12-31T23:59:59.000Z",
    "isSticky": true,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": "2025-01-27T03:10:00.000Z",
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:10:00.000Z"
  }
}
```

---

### 7. å–æ¶ˆå‘å¸ƒå…¬å‘Š

**æ¥å£åœ°å€**: `POST /api/admin/notices/:noticeId/unpublish`

**åŠŸèƒ½æè¿°**: å–æ¶ˆå‘å¸ƒæŒ‡å®šå…¬å‘Š

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| noticeId | string | æ˜¯ | å…¬å‘ŠID |

**è¯·æ±‚ç¤ºä¾‹**:
```http
POST /api/admin/notices/notice-002/unpublish
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å…¬å‘Šå–æ¶ˆå‘å¸ƒæˆåŠŸ",
  "data": {
    "_id": "notice-002",
    "title": "æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥ï¼ˆæ›´æ–°ï¼‰",
    "content": "èœå“ç®¡ç†åŠŸèƒ½å·²å…¨æ–°ä¸Šçº¿ï¼Œæ”¯æŒèœå“åˆ†ç±»ã€å›¾ç‰‡ä¸Šä¼ ã€æ‰¹é‡æ“ä½œç­‰æ–°ç‰¹æ€§ã€‚",
    "type": "info",
    "priority": 5,
    "status": "draft",
    "startTime": "2025-01-27T00:00:00.000Z",
    "endTime": "2025-12-31T23:59:59.000Z",
    "isSticky": true,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": null,
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:15:00.000Z"
  }
}
```

---

### 8. æ‰¹é‡åˆ é™¤å…¬å‘Š

**æ¥å£åœ°å€**: `DELETE /api/admin/notices/batch`

**åŠŸèƒ½æè¿°**: æ‰¹é‡åˆ é™¤å¤šä¸ªå…¬å‘Š

**è¯·æ±‚ä½“**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| noticeIds | array | æ˜¯ | å…¬å‘ŠIDæ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**:
```http
DELETE /api/admin/notices/batch
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json

{
  "noticeIds": ["notice-001", "notice-002", "notice-003"]
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ‰¹é‡åˆ é™¤å…¬å‘ŠæˆåŠŸ",
  "data": {
    "successCount": 2,
    "totalCount": 3,
    "errors": [
      {
        "noticeId": "notice-003",
        "error": "å…¬å‘Šä¸å­˜åœ¨"
      }
    ]
  }
}
```

---

## ğŸ“Š æ•°æ®å­—æ®µè¯´æ˜

### å…¬å‘Šå¯¹è±¡å­—æ®µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| _id | string | å…¬å‘Šå”¯ä¸€æ ‡è¯†ç¬¦ |
| title | string | å…¬å‘Šæ ‡é¢˜ |
| content | string | å…¬å‘Šå†…å®¹ |
| type | string | å…¬å‘Šç±»å‹ï¼šinfoã€warningã€errorã€success |
| priority | number | ä¼˜å…ˆçº§ï¼ˆ0-10ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰ |
| status | string | çŠ¶æ€ï¼šdraftã€publishedã€archived |
| startTime | string | å¼€å§‹æ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |
| endTime | string | ç»“æŸæ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |
| targetUsers | array | ç›®æ ‡ç”¨æˆ·IDæ•°ç»„ |
| isSticky | boolean | æ˜¯å¦ç½®é¡¶ |
| viewCount | number | æŸ¥çœ‹æ¬¡æ•° |
| publisherId | string | å‘å¸ƒè€…ID |
| publisherName | string | å‘å¸ƒè€…å§“å |
| publishTime | string | å‘å¸ƒæ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |
| createTime | string | åˆ›å»ºæ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |
| updateTime | string | æ›´æ–°æ—¶é—´ï¼ˆISO8601æ ¼å¼ï¼‰ |

---

## âš ï¸ é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå¿…å¡«å­—æ®µ |
| 401 | æœªæˆæƒ | æ£€æŸ¥JWT Tokenæ˜¯å¦æœ‰æ•ˆ |
| 403 | æƒé™ä¸è¶³ | ç¡®è®¤ç”¨æˆ·å…·æœ‰ç®¡ç†å‘˜æƒé™ |
| 404 | å…¬å‘Šä¸å­˜åœ¨ | æ£€æŸ¥å…¬å‘ŠIDæ˜¯å¦æ­£ç¡® |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å–æœ‰æ•ˆçš„JWT Tokenï¼Ÿ
A: ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•è®¤è¯æ¥å£è·å–Tokenï¼Œç„¶ååœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ã€‚

### Q2: å…¬å‘Šçš„ä¼˜å…ˆçº§å¦‚ä½•æ’åºï¼Ÿ
A: ä¼˜å…ˆçº§æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒåŒæ—¶ç½®é¡¶å…¬å‘Šä¼šä¼˜å…ˆæ˜¾ç¤ºã€‚

### Q3: å¦‚ä½•å®ç°å…¬å‘Šçš„å®šæ—¶å‘å¸ƒï¼Ÿ
A: å¯ä»¥è®¾ç½®startTimeå’ŒendTimeå­—æ®µï¼Œç³»ç»Ÿä¼šæ ¹æ®æ—¶é—´è‡ªåŠ¨æ§åˆ¶å…¬å‘Šçš„æ˜¾ç¤ºçŠ¶æ€ã€‚

### Q4: æ‰¹é‡åˆ é™¤æ—¶éƒ¨åˆ†å¤±è´¥å¦‚ä½•å¤„ç†ï¼Ÿ
A: å“åº”ä¸­ä¼šè¿”å›è¯¦ç»†çš„æˆåŠŸå’Œå¤±è´¥ä¿¡æ¯ï¼Œå¯ä»¥æ ¹æ®errorsæ•°ç»„å¤„ç†å¤±è´¥çš„é¡¹ç›®ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜è¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

---

**æ³¨æ„**: æœ¬æ–‡æ¡£åŸºäºå½“å‰ç³»ç»Ÿå®ç°æƒ…å†µç¼–å†™ï¼Œéšç€åŠŸèƒ½å¼€å‘è¿›åº¦ä¼šæŒç»­æ›´æ–°ã€‚
