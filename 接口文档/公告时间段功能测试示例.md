# å…¬å‘Šæ—¶é—´æ®µåŠŸèƒ½æµ‹è¯•ç¤ºä¾‹

## ğŸ“‹ æµ‹è¯•è¯´æ˜

æœ¬æ–‡æ¡£æä¾›å…¬å‘Šæ—¶é—´æ®µåŠŸèƒ½çš„æµ‹è¯•ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ç®€åŒ–çš„æ—¥æœŸå­—æ®µåˆ›å»ºæ—¶é—´æ®µå…¬å‘Šã€‚

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹1ï¼šåˆ›å»ºä¸´æ—¶å…¬å‘Šï¼ˆæ¨èç”¨æ³•ï¼‰

**è¯·æ±‚**:
```http
POST /api/admin/notices
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "title": "æ˜¥èŠ‚æ”¾å‡é€šçŸ¥",
  "content": "æ ¹æ®å›½å®¶æ³•å®šèŠ‚å‡æ—¥å®‰æ’ï¼Œç³»ç»Ÿå°†äºæ˜¥èŠ‚æœŸé—´æš‚åœæœåŠ¡ï¼Œè¯·æå‰åšå¥½ç›¸å…³å‡†å¤‡ã€‚",
  "type": "info",
  "priority": 3,
  "status": "draft",
  "startDate": "2025-02-10",
  "endDate": "2025-02-17",
  "isSticky": true
}
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "message": "å…¬å‘Šåˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "notice-002",
    "title": "æ˜¥èŠ‚æ”¾å‡é€šçŸ¥",
    "content": "æ ¹æ®å›½å®¶æ³•å®šèŠ‚å‡æ—¥å®‰æ’ï¼Œç³»ç»Ÿå°†äºæ˜¥èŠ‚æœŸé—´æš‚åœæœåŠ¡ï¼Œè¯·æå‰åšå¥½ç›¸å…³å‡†å¤‡ã€‚",
    "type": "info",
    "priority": 3,
    "status": "draft",
    "startTime": "2025-02-10T00:00:00.000Z",
    "endTime": "2025-02-17T23:59:59.999Z",
    "isSticky": true,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": null,
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:00:00.000Z"
  }
}
```

**éªŒè¯è¦ç‚¹**:
- âœ… `startTime` è‡ªåŠ¨è®¾ç½®ä¸º `2025-02-10T00:00:00.000Z`
- âœ… `endTime` è‡ªåŠ¨è®¾ç½®ä¸º `2025-02-17T23:59:59.999Z`
- âœ… å‰ç«¯åªéœ€æä¾›æ—¥æœŸï¼Œæ— éœ€å…³å¿ƒå…·ä½“æ—¶é—´

---

### æµ‹è¯•ç”¨ä¾‹2ï¼šåˆ›å»ºæ°¸ä¹…å…¬å‘Š

**è¯·æ±‚**:
```http
POST /api/admin/notices
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "title": "ç³»ç»Ÿä½¿ç”¨è¯´æ˜",
  "content": "æ¬¢è¿ä½¿ç”¨æ™ºæ…§ç‰©ä¸šç®¡ç†ç³»ç»Ÿï¼Œè¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹ä½¿ç”¨è¯´æ˜...",
  "type": "info",
  "priority": 1,
  "status": "published",
  "isSticky": false
}
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "message": "å…¬å‘Šåˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "notice-003",
    "title": "ç³»ç»Ÿä½¿ç”¨è¯´æ˜",
    "content": "æ¬¢è¿ä½¿ç”¨æ™ºæ…§ç‰©ä¸šç®¡ç†ç³»ç»Ÿï¼Œè¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹ä½¿ç”¨è¯´æ˜...",
    "type": "info",
    "priority": 1,
    "status": "published",
    "startTime": null,
    "endTime": null,
    "isSticky": false,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": "2025-01-27T03:00:00.000Z",
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:00:00.000Z"
  }
}
```

**éªŒè¯è¦ç‚¹**:
- âœ… `startTime` å’Œ `endTime` éƒ½ä¸º `null`ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
- âœ… ä¸å¡«å†™æ—¥æœŸå­—æ®µåˆ›å»ºæ°¸ä¹…å…¬å‘Š

---

### æµ‹è¯•ç”¨ä¾‹3ï¼šåˆ›å»ºå•æ—¥å…¬å‘Š

**è¯·æ±‚**:
```http
POST /api/admin/notices
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "title": "ç³»ç»Ÿå‡çº§é€šçŸ¥",
  "content": "ç³»ç»Ÿå°†äºæ˜å¤©è¿›è¡Œå‡çº§ç»´æŠ¤ï¼Œé¢„è®¡ç»´æŠ¤æ—¶é—´2å°æ—¶ï¼Œè¯·æå‰ä¿å­˜æ•°æ®ã€‚",
  "type": "warning",
  "priority": 5,
  "status": "draft",
  "startDate": "2025-01-28",
  "endDate": "2025-01-28"
}
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "message": "å…¬å‘Šåˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "notice-004",
    "title": "ç³»ç»Ÿå‡çº§é€šçŸ¥",
    "content": "ç³»ç»Ÿå°†äºæ˜å¤©è¿›è¡Œå‡çº§ç»´æŠ¤ï¼Œé¢„è®¡ç»´æŠ¤æ—¶é—´2å°æ—¶ï¼Œè¯·æå‰ä¿å­˜æ•°æ®ã€‚",
    "type": "warning",
    "priority": 5,
    "status": "draft",
    "startTime": "2025-01-28T00:00:00.000Z",
    "endTime": "2025-01-28T23:59:59.999Z",
    "isSticky": false,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": null,
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:00:00.000Z"
  }
}
```

**éªŒè¯è¦ç‚¹**:
- âœ… åŒä¸€å¤©çš„å¼€å§‹å’Œç»“æŸæ—¶é—´
- âœ… å¼€å§‹æ—¶é—´ï¼š`00:00:00`ï¼Œç»“æŸæ—¶é—´ï¼š`23:59:59`

---

### æµ‹è¯•ç”¨ä¾‹4ï¼šæ›´æ–°å…¬å‘Šæ—¶é—´æ®µ

**è¯·æ±‚**:
```http
PUT /api/admin/notices/notice-002
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "title": "æ˜¥èŠ‚æ”¾å‡é€šçŸ¥ï¼ˆæ›´æ–°ï¼‰",
  "startDate": "2025-02-11",
  "endDate": "2025-02-18",
  "priority": 5
}
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "message": "å…¬å‘Šæ›´æ–°æˆåŠŸ",
  "data": {
    "_id": "notice-002",
    "title": "æ˜¥èŠ‚æ”¾å‡é€šçŸ¥ï¼ˆæ›´æ–°ï¼‰",
    "content": "æ ¹æ®å›½å®¶æ³•å®šèŠ‚å‡æ—¥å®‰æ’ï¼Œç³»ç»Ÿå°†äºæ˜¥èŠ‚æœŸé—´æš‚åœæœåŠ¡ï¼Œè¯·æå‰åšå¥½ç›¸å…³å‡†å¤‡ã€‚",
    "type": "info",
    "priority": 5,
    "status": "draft",
    "startTime": "2025-02-11T00:00:00.000Z",
    "endTime": "2025-02-18T23:59:59.999Z",
    "isSticky": true,
    "publisherId": "admin-001",
    "publisherName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "publishTime": null,
    "createTime": "2025-01-27T03:00:00.000Z",
    "updateTime": "2025-01-27T03:05:00.000Z"
  }
}
```

**éªŒè¯è¦ç‚¹**:
- âœ… æ—¶é—´æ®µå·²æ›´æ–°
- âœ… ä¼˜å…ˆçº§å·²æ›´æ–°
- âœ… å…¶ä»–å­—æ®µä¿æŒä¸å˜

---

## ğŸ” é”™è¯¯æµ‹è¯•ç”¨ä¾‹

### é”™è¯¯æµ‹è¯•1ï¼šæ— æ•ˆæ—¥æœŸæ ¼å¼

**è¯·æ±‚**:
```http
POST /api/admin/notices
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "title": "æµ‹è¯•å…¬å‘Š",
  "content": "æµ‹è¯•å†…å®¹",
  "startDate": "2025/01/27",
  "endDate": "2025-01-31"
}
```

**é¢„æœŸå“åº”**:
```json
{
  "success": false,
  "message": "å¼€å§‹æ—¥æœŸæ ¼å¼æ— æ•ˆï¼Œè¯·ä½¿ç”¨YYYY-MM-DDæ ¼å¼",
  "data": null
}
```

### é”™è¯¯æµ‹è¯•2ï¼šå¼€å§‹æ—¥æœŸæ™šäºç»“æŸæ—¥æœŸ

**è¯·æ±‚**:
```http
POST /api/admin/notices
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "title": "æµ‹è¯•å…¬å‘Š",
  "content": "æµ‹è¯•å†…å®¹",
  "startDate": "2025-01-31",
  "endDate": "2025-01-27"
}
```

**é¢„æœŸå“åº”**:
```json
{
  "success": false,
  "message": "å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ",
  "data": null
}
```

---

## ğŸ“Š æ—¶é—´è½¬æ¢å¯¹ç…§è¡¨

| å‰ç«¯è¾“å…¥ | åç«¯å­˜å‚¨ | è¯´æ˜ |
|----------|----------|------|
| `"2025-01-27"` | `"2025-01-27T00:00:00.000Z"` | å¼€å§‹æ—¶é—´ï¼ˆå½“å¤©00:00:00ï¼‰ |
| `"2025-01-27"` | `"2025-01-27T23:59:59.999Z"` | ç»“æŸæ—¶é—´ï¼ˆå½“å¤©23:59:59ï¼‰ |
| ä¸å¡«å†™ | `null` | æ°¸ä¹…å…¬å‘Š |

---

## ğŸ¯ å‰ç«¯å®ç°å»ºè®®

### 1. è¡¨å•éªŒè¯
```javascript
function validateDateRange(startDate, endDate) {
  if (startDate && endDate) {
    if (new Date(startDate) > new Date(endDate)) {
      return 'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ';
    }
  }
  return null;
}
```

### 2. æ•°æ®æäº¤
```javascript
function submitNotice() {
  const formData = {
    title: document.getElementById('title').value,
    content: document.getElementById('content').value,
    type: document.getElementById('type').value,
    priority: parseInt(document.getElementById('priority').value),
    isSticky: document.getElementById('isSticky').checked
  };
  
  // æ·»åŠ æ—¥æœŸå­—æ®µï¼ˆå¦‚æœå¡«å†™äº†ï¼‰
  const startDate = document.getElementById('startDate').value;
  const endDate = document.getElementById('endDate').value;
  
  if (startDate) formData.startDate = startDate;
  if (endDate) formData.endDate = endDate;
  
  // å‘é€è¯·æ±‚...
}
```

### 3. æ—¶é—´æ˜¾ç¤º
```javascript
function formatNoticeTime(startTime, endTime) {
  if (!startTime && !endTime) {
    return 'æ°¸ä¹…æœ‰æ•ˆ';
  }
  
  const start = new Date(startTime);
  const end = new Date(endTime);
  
  const startStr = start.toLocaleDateString('zh-CN');
  const endStr = end.toLocaleDateString('zh-CN');
  
  if (startStr === endStr) {
    return startStr; // åŒä¸€å¤©
  } else {
    return `${startStr} è‡³ ${endStr}`;
  }
}
```

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] åˆ›å»ºä¸´æ—¶å…¬å‘Šï¼ˆå¼€å§‹å’Œç»“æŸæ—¥æœŸï¼‰
- [ ] åˆ›å»ºæ°¸ä¹…å…¬å‘Šï¼ˆä¸å¡«å†™æ—¥æœŸï¼‰
- [ ] åˆ›å»ºå•æ—¥å…¬å‘Šï¼ˆå¼€å§‹å’Œç»“æŸæ—¥æœŸç›¸åŒï¼‰
- [ ] æ›´æ–°å…¬å‘Šæ—¶é—´æ®µ
- [ ] éªŒè¯æ—¥æœŸæ ¼å¼é”™è¯¯å¤„ç†
- [ ] éªŒè¯æ—¥æœŸèŒƒå›´é”™è¯¯å¤„ç†
- [ ] éªŒè¯æ—¶é—´è‡ªåŠ¨è½¬æ¢æ­£ç¡®æ€§
- [ ] éªŒè¯å‰ç«¯è¡¨å•æäº¤
- [ ] éªŒè¯æ—¶é—´æ˜¾ç¤ºæ ¼å¼

---

**æ³¨æ„**: è¿™äº›æµ‹è¯•ç”¨ä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç®€åŒ–çš„æ—¥æœŸå­—æ®µåˆ›å»ºæ—¶é—´æ®µå…¬å‘Šï¼Œå‰ç«¯åªéœ€è¦æä¾›æ—¥æœŸé€‰æ‹©å™¨ï¼Œæ— éœ€å¤„ç†å¤æ‚çš„æ—¶é—´é€‰æ‹©ã€‚

