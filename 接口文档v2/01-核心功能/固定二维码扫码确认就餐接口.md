# ğŸ“± å›ºå®šäºŒç»´ç æ‰«ç ç¡®è®¤å°±é¤æ¥å£æ–‡æ¡£

## ğŸ“– æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†ä½¿ç”¨å›ºå®šäºŒç»´ç è¿›è¡Œæ‰«ç ç¡®è®¤å°±é¤çš„å®Œæ•´æµç¨‹å’Œæ¥å£ã€‚ç³»ç»Ÿæä¾›ä¸€ä¸ªå›ºå®šçš„äºŒç»´ç ä¾›æ‰€æœ‰ç”¨æˆ·æ‰«æç¡®è®¤å°±é¤ã€‚

**åŸºç¡€è·¯å¾„**: `/api/qr-scan`  
**è®¤è¯æ–¹å¼**: JWT Token  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0  
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ

## ğŸ¯ å›ºå®šäºŒç»´ç ä¿¡æ¯

### é»˜è®¤å›ºå®šäºŒç»´ç 
- **äºŒç»´ç æ ‡è¯†**: `DINING_QR_MAIN_001`
- **äºŒç»´ç åç§°**: `é¤å…ä¸»å…¥å£äºŒç»´ç `
- **å¼ è´´ä½ç½®**: `é¤å…ä¸»å…¥å£`
- **çŠ¶æ€**: `active`ï¼ˆå¯ç”¨ï¼‰
- **ç”¨é€”**: æ‰€æœ‰ç”¨æˆ·æ‰«ç ç¡®è®¤å°±é¤

## ğŸ” è®¤è¯é…ç½®

### è¯·æ±‚å¤´è®¾ç½®
```javascript
const headers = {
  'Authorization': `Bearer ${token}`,
  'Content-Type': 'application/json'
};
```

### Tokenè·å–
```javascript
// ç™»å½•åè·å–token
const loginResponse = await fetch('/api/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ username, password })
});
const { data: { token } } = await loginResponse.json();
```

## ğŸ“± æ ¸å¿ƒæ¥å£

### 1. ç”Ÿæˆå›ºå®šäºŒç»´ç å›¾ç‰‡

**æ¥å£åœ°å€**: `GET /api/qr-scan/qr-codes/DINING_QR_MAIN_001/image`

**åŠŸèƒ½æè¿°**: ç”Ÿæˆå›ºå®šäºŒç»´ç çš„å›¾ç‰‡ï¼Œä¾›å‰ç«¯æ˜¾ç¤º

**æƒé™è¦æ±‚**: å·²ç™»å½•ç”¨æˆ·

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**: è·¯å¾„å‚æ•°
- `qrCode`: å›ºå®šäºŒç»´ç æ ‡è¯† `DINING_QR_MAIN_001`

**æŸ¥è¯¢å‚æ•°**:
- `width`: å›¾ç‰‡å®½åº¦ï¼Œå¯é€‰ï¼Œé»˜è®¤200
- `margin`: è¾¹è·ï¼Œå¯é€‰ï¼Œé»˜è®¤2

**æˆåŠŸå“åº”**:
```json
{
  "success": true,
  "message": "äºŒç»´ç å›¾ç‰‡ç”ŸæˆæˆåŠŸ",
  "data": {
    "qrCode": "DINING_QR_MAIN_001",
    "imageDataURL": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
    "width": 200,
    "margin": 2
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

**å‰ç«¯è°ƒç”¨ç¤ºä¾‹**:
```javascript
async function generateFixedQRCode(width = 200, margin = 2) {
  try {
    const response = await fetch(`/api/qr-scan/qr-codes/DINING_QR_MAIN_001/image?width=${width}&margin=${margin}`, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const result = await response.json();
    
    if (result.success) {
      return result.data.imageDataURL;
    } else {
      throw new Error(result.message);
    }
  } catch (error) {
    console.error('ç”ŸæˆäºŒç»´ç å›¾ç‰‡å¤±è´¥:', error);
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const qrImageDataURL = await generateFixedQRCode();
// åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºäºŒç»´ç å›¾ç‰‡
const img = document.createElement('img');
img.src = qrImageDataURL;
img.alt = 'é¤å…ä¸»å…¥å£äºŒç»´ç ';
document.body.appendChild(img);
```

### 2. æ‰«ç ç¡®è®¤å°±é¤

**æ¥å£åœ°å€**: `POST /api/qr-scan/scan`

**åŠŸèƒ½æè¿°**: å¤„ç†ç”¨æˆ·æ‰«ç ç¡®è®¤å°±é¤è¯·æ±‚ï¼Œæ ¹æ®æ‰«ç æ—¶é—´è‡ªåŠ¨åˆ¤æ–­é¤æ¬¡

**æƒé™è¦æ±‚**: å·²ç™»å½•ç”¨æˆ·

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "qrCode": "DINING_QR_MAIN_001",
  "scanTime": "2025-09-09T12:30:00.000Z"
}
```

**å‚æ•°è¯´æ˜**:
- `qrCode`: å›ºå®šäºŒç»´ç æ ‡è¯†ï¼Œå¿…å¡«ï¼Œå€¼ä¸º `DINING_QR_MAIN_001`
- `scanTime`: æ‰«ç æ—¶é—´ï¼Œå¿…å¡«ï¼ŒISO 8601æ ¼å¼

**æˆåŠŸå“åº”**:
```json
{
  "success": true,
  "message": "ç™»è®°æˆåŠŸï¼[åˆé¤] 2025-09-09 12:30",
  "data": {
    "userId": "user-uuid",
    "userName": "å¼ ä¸‰",
    "mealType": "lunch",
    "mealTypeName": "åˆé¤",
    "diningDate": "2025-09-09",
    "scanTime": "2025-09-09 12:30:00",
    "qrCodeInfo": {
      "name": "é¤å…ä¸»å…¥å£äºŒç»´ç ",
      "location": "é¤å…ä¸»å…¥å£"
    }
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®°",
  "error": "æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®°",
  "code": "400",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

**å‰ç«¯è°ƒç”¨ç¤ºä¾‹**:
```javascript
async function scanQRCodeConfirmDining() {
  try {
    const response = await fetch('/api/qr-scan/scan', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        qrCode: 'DINING_QR_MAIN_001', // å›ºå®šäºŒç»´ç æ ‡è¯†
        scanTime: new Date().toISOString()
      })
    });
    
    const result = await response.json();
    
    if (result.success) {
      console.log('æ‰«ç ç¡®è®¤æˆåŠŸ:', result.message);
      return {
        success: true,
        data: result.data,
        message: result.message
      };
    } else {
      console.error('æ‰«ç ç¡®è®¤å¤±è´¥:', result.message);
      return {
        success: false,
        message: result.message
      };
    }
  } catch (error) {
    console.error('æ‰«ç è¯·æ±‚å¤±è´¥:', error);
    return {
      success: false,
      message: 'ç½‘ç»œè¯·æ±‚å¤±è´¥'
    };
  }
}
```

### 3. è·å–ç”¨æˆ·å°±é¤ç¡®è®¤çŠ¶æ€

**æ¥å£åœ°å€**: `GET /api/dining-confirmation/status`

**åŠŸèƒ½æè¿°**: è·å–ç”¨æˆ·æŒ‡å®šæ—¥æœŸçš„å°±é¤ç¡®è®¤çŠ¶æ€ï¼Œæ˜¾ç¤ºæ¯ä¸ªé¤æ¬¡çš„æŠ¥é¤å’Œç¡®è®¤æƒ…å†µ

**æƒé™è¦æ±‚**: å·²ç™»å½•ç”¨æˆ·

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {your-jwt-token}
```

**è¯·æ±‚å‚æ•°**:
```
GET /api/dining-confirmation/status?date=2025-09-09
```

**å‚æ•°è¯´æ˜**:
- `date`: æŸ¥è¯¢æ—¥æœŸï¼Œå¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼Œé»˜è®¤ä»Šæ—¥

**æˆåŠŸå“åº”**:
```json
{
  "success": true,
  "message": "è·å–å°±é¤ç¡®è®¤çŠ¶æ€æˆåŠŸ",
  "data": {
    "date": "2025-09-09",
    "mealConfirmationStatus": {
      "breakfast": {
        "isRegistered": true,
        "diningStatus": "dined",
        "actualDiningTime": "2025-09-09T08:30:00.000Z",
        "confirmationType": "qr",
        "confirmationTime": "2025-09-09T08:30:00.000Z"
      },
      "lunch": {
        "isRegistered": true,
        "diningStatus": "ordered",
        "actualDiningTime": null,
        "confirmationType": null,
        "confirmationTime": null
      },
      "dinner": {
        "isRegistered": false,
        "diningStatus": null,
        "actualDiningTime": null,
        "confirmationType": null,
        "confirmationTime": null
      }
    }
  },
  "code": "200",
  "timestamp": "2025-09-09T12:30:00.000Z"
}
```

## ğŸ”„ æ‰«ç ç¡®è®¤å°±é¤å®Œæ•´æµç¨‹

### 1. ä¸šåŠ¡æµç¨‹
```
ç”¨æˆ·æŠ¥é¤ (diningStatus: 'ordered')
   â†“
ç”¨æˆ·æ‰«æå›ºå®šäºŒç»´ç  (DINING_QR_MAIN_001)
   â†“
ç³»ç»ŸéªŒè¯äºŒç»´ç æœ‰æ•ˆæ€§
   â†“
ç³»ç»Ÿæ ¹æ®æ‰«ç æ—¶é—´åˆ¤æ–­é¤æ¬¡ (breakfast/lunch/dinner)
   â†“
ç³»ç»Ÿæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æŠ¥é¤
   â†“
ç³»ç»Ÿæ£€æŸ¥æ˜¯å¦é‡å¤æ‰«ç 
   â†“
ç³»ç»Ÿæ›´æ–°è®¢å•çŠ¶æ€ (diningStatus: 'dined')
   â†“
ç³»ç»Ÿåˆ›å»ºç¡®è®¤å°±é¤æ—¥å¿— (confirmationType: 'qr')
   â†“
å®Œæˆå°±é¤ç¡®è®¤
```

### 2. æ•°æ®æ›´æ–°

æ‰«ç æˆåŠŸåï¼Œç³»ç»Ÿä¼šåŒæ—¶æ›´æ–°ä»¥ä¸‹æ•°æ®ï¼š

#### 2.1 æ›´æ–° `dining_orders` è¡¨
```sql
UPDATE dining_orders 
SET diningStatus = 'dined', 
    actualDiningTime = 'æ‰«ç æ—¶é—´'
WHERE _id = 'è®¢å•ID'
```

#### 2.2 åˆ›å»º `dining_registrations` è®°å½•
```sql
INSERT INTO dining_registrations 
(_id, userId, userName, qrCodeId, qrCode, scanTime, mealType, diningDate, orderId, status)
VALUES ('ç™»è®°ID', 'ç”¨æˆ·ID', 'ç”¨æˆ·å§“å', 'äºŒç»´ç ID', 'DINING_QR_MAIN_001', 'æ‰«ç æ—¶é—´', 'é¤æ¬¡', 'å°±é¤æ—¥æœŸ', 'è®¢å•ID', 'success')
```

#### 2.3 åˆ›å»º `dining_confirmation_logs` è®°å½•
```sql
INSERT INTO dining_confirmation_logs 
(_id, orderId, userId, userName, confirmationType, confirmationTime, remark, confirmedBy)
VALUES ('æ—¥å¿—ID', 'è®¢å•ID', 'ç”¨æˆ·ID', 'ç”¨æˆ·å§“å', 'qr', 'æ‰«ç æ—¶é—´', 'æ‰«ç ç¡®è®¤å°±é¤ - äºŒç»´ç : DINING_QR_MAIN_001', 'ç”¨æˆ·ID')
```

## ğŸ“‹ ä¸šåŠ¡è§„åˆ™

### æ‰«ç ç¡®è®¤è§„åˆ™

1. **æ—¶é—´é™åˆ¶**: åªæœ‰åœ¨å°±é¤æ—¶é—´å†…æ‰«ç æ‰èƒ½æˆåŠŸç¡®è®¤
   - æ—©é¤æ—¶é—´: 6:00-10:00
   - åˆé¤æ—¶é—´: 11:00-14:00
   - æ™šé¤æ—¶é—´: 17:00-20:00

2. **æŠ¥é¤éªŒè¯**: ç”¨æˆ·å¿…é¡»å…ˆæŠ¥é¤æ‰èƒ½è¿›è¡Œæ‰«ç ç¡®è®¤
   - âš ï¸ **é‡è¦**: åªæœ‰éƒ¨é—¨ç®¡ç†å‘˜å¯ä»¥ä¸ºéƒ¨é—¨æˆå‘˜æŠ¥é¤
   - æ™®é€šç”¨æˆ·æ— æ³•è‡ªè¡ŒæŠ¥é¤ï¼Œéœ€è¦éƒ¨é—¨ç®¡ç†å‘˜ä»£ä¸ºæŠ¥é¤

3. **é‡å¤ç¡®è®¤**: åŒä¸€ç”¨æˆ·åŒä¸€é¤æ¬¡åªèƒ½ç¡®è®¤ä¸€æ¬¡

4. **äºŒç»´ç æœ‰æ•ˆæ€§**: å›ºå®šäºŒç»´ç  `DINING_QR_MAIN_001` å¿…é¡»å¤„äº `active` çŠ¶æ€

### é”™è¯¯å¤„ç†

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| å½“å‰æ—¶é—´ä¸åœ¨å°±é¤æ—¶é—´å†… | æ‰«ç æ—¶é—´ä¸åœ¨è§„å®šå°±é¤æ—¶é—´å†… | åœ¨å°±é¤æ—¶é—´å†…æ‰«ç  |
| æ‚¨å°šæœªæŠ¥é¤ï¼Œæ— æ³•è¿›è¡Œå°±é¤ç™»è®° | ç”¨æˆ·æ²¡æœ‰æŠ¥é¤è®°å½• | è”ç³»éƒ¨é—¨ç®¡ç†å‘˜ä»£ä¸ºæŠ¥é¤ |
| æ‚¨å·²ç™»è®°è¿‡æœ¬æ¬¡å°±é¤ | ç”¨æˆ·å·²ç»ç¡®è®¤è¿‡è¯¥é¤æ¬¡ | æ— éœ€é‡å¤ç¡®è®¤ |
| äºŒç»´ç æ— æ•ˆæˆ–å·²åœç”¨ | äºŒç»´ç ä¸å­˜åœ¨æˆ–å·²åœç”¨ | ä½¿ç”¨æœ‰æ•ˆçš„å›ºå®šäºŒç»´ç  |
| ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²è¢«ç¦ç”¨ | ç”¨æˆ·è´¦å·å¼‚å¸¸ | è”ç³»ç®¡ç†å‘˜æ£€æŸ¥è´¦å·çŠ¶æ€ |

## ğŸ”§ å‰ç«¯å®Œæ•´å®ç°ç¤ºä¾‹

### å®Œæ•´çš„æ‰«ç ç¡®è®¤åŠŸèƒ½

```javascript
class FixedQRCodeManager {
  constructor(token) {
    this.token = token;
    this.baseURL = '/api/qr-scan';
    this.fixedQRCode = 'DINING_QR_MAIN_001'; // å›ºå®šäºŒç»´ç æ ‡è¯†
  }
  
  // ç”Ÿæˆå›ºå®šäºŒç»´ç å›¾ç‰‡
  async generateFixedQRCodeImage(width = 200, margin = 2) {
    try {
      const response = await fetch(`${this.baseURL}/qr-codes/${this.fixedQRCode}/image?width=${width}&margin=${margin}`, {
        headers: {
          'Authorization': `Bearer ${this.token}`
        }
      });
      
      const result = await response.json();
      
      if (result.success) {
        return result.data.imageDataURL;
      } else {
        throw new Error(result.message);
      }
    } catch (error) {
      console.error('ç”Ÿæˆå›ºå®šäºŒç»´ç å›¾ç‰‡å¤±è´¥:', error);
      throw error;
    }
  }
  
  // æ‰«ç ç¡®è®¤å°±é¤
  async scanQRCodeConfirmDining() {
    try {
      const response = await fetch(`${this.baseURL}/scan`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          qrCode: this.fixedQRCode, // ä½¿ç”¨å›ºå®šäºŒç»´ç 
          scanTime: new Date().toISOString()
        })
      });
      
      const result = await response.json();
      
      if (result.success) {
        return {
          success: true,
          data: result.data,
          message: result.message
        };
      } else {
        return {
          success: false,
          message: result.message
        };
      }
    } catch (error) {
      return {
        success: false,
        message: 'ç½‘ç»œè¯·æ±‚å¤±è´¥'
      };
    }
  }
  
  // è·å–ç”¨æˆ·å°±é¤ç¡®è®¤çŠ¶æ€
  async getUserDiningStatus(date = null) {
    try {
      const params = new URLSearchParams();
      if (date) params.append('date', date);
      
      const response = await fetch(`/api/dining-confirmation/status?${params}`, {
        headers: {
          'Authorization': `Bearer ${this.token}`
        }
      });
      
      const result = await response.json();
      
      if (result.success) {
        return result.data;
      } else {
        throw new Error(result.message);
      }
    } catch (error) {
      console.error('è·å–å°±é¤çŠ¶æ€å¤±è´¥:', error);
      throw error;
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const qrManager = new FixedQRCodeManager(userToken);

// 1. ç”Ÿæˆå¹¶æ˜¾ç¤ºå›ºå®šäºŒç»´ç 
async function displayFixedQRCode() {
  try {
    const qrImageDataURL = await qrManager.generateFixedQRCodeImage(200, 2);
    
    // åˆ›å»ºäºŒç»´ç æ˜¾ç¤ºå…ƒç´ 
    const qrContainer = document.createElement('div');
    qrContainer.className = 'fixed-qr-code';
    
    const qrImage = document.createElement('img');
    qrImage.src = qrImageDataURL;
    qrImage.alt = 'é¤å…ä¸»å…¥å£äºŒç»´ç ';
    qrImage.style.width = '200px';
    qrImage.style.height = '200px';
    
    const qrInfo = document.createElement('div');
    qrInfo.innerHTML = `
      <h3>é¤å…ä¸»å…¥å£äºŒç»´ç </h3>
      <p>ä½ç½®: é¤å…ä¸»å…¥å£</p>
      <p>æ ‡è¯†: DINING_QR_MAIN_001</p>
      <p>ç”¨é€”: æ‰«ç ç¡®è®¤å°±é¤</p>
    `;
    
    qrContainer.appendChild(qrImage);
    qrContainer.appendChild(qrInfo);
    document.body.appendChild(qrContainer);
    
  } catch (error) {
    console.error('æ˜¾ç¤ºå›ºå®šäºŒç»´ç å¤±è´¥:', error);
  }
}

// 2. æ‰«ç ç¡®è®¤å°±é¤
async function confirmDiningByScan() {
  const result = await qrManager.scanQRCodeConfirmDining();
  
  if (result.success) {
    alert(`æ‰«ç ç¡®è®¤æˆåŠŸï¼${result.message}`);
    console.log('ç¡®è®¤æ•°æ®:', result.data);
  } else {
    alert(`æ‰«ç ç¡®è®¤å¤±è´¥ï¼š${result.message}`);
  }
}

// 3. æŸ¥çœ‹å°±é¤çŠ¶æ€
async function checkDiningStatus() {
  try {
    const status = await qrManager.getUserDiningStatus();
    console.log('å°±é¤çŠ¶æ€:', status);
    
    // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
    Object.keys(status.mealConfirmationStatus).forEach(mealType => {
      const meal = status.mealConfirmationStatus[mealType];
      console.log(`${mealType}: ${meal.isRegistered ? 'å·²æŠ¥é¤' : 'æœªæŠ¥é¤'} - ${meal.diningStatus === 'dined' ? 'å·²ç¡®è®¤' : 'æœªç¡®è®¤'}`);
    });
  } catch (error) {
    console.error('è·å–å°±é¤çŠ¶æ€å¤±è´¥:', error);
  }
}

// åˆå§‹åŒ–é¡µé¢
async function initPage() {
  await displayFixedQRCode();
  await checkDiningStatus();
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', initPage);
```

## âœ… ç¡®è®¤æ‰«ç è¿‡ç¨‹èƒ½å®Œæˆå°±é¤ç¡®è®¤

### å®Œæ•´çš„ç¡®è®¤æµç¨‹éªŒè¯

1. **âœ… äºŒç»´ç éªŒè¯**: éªŒè¯å›ºå®šäºŒç»´ç  `DINING_QR_MAIN_001` çš„æœ‰æ•ˆæ€§
2. **âœ… æ—¶é—´åˆ¤æ–­**: æ ¹æ®æ‰«ç æ—¶é—´è‡ªåŠ¨åˆ¤æ–­é¤æ¬¡ï¼ˆæ—©é¤/åˆé¤/æ™šé¤ï¼‰
3. **âœ… ç”¨æˆ·éªŒè¯**: éªŒè¯ç”¨æˆ·èº«ä»½å’ŒçŠ¶æ€
4. **âœ… æŠ¥é¤æ£€æŸ¥**: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²æŠ¥é¤
5. **âœ… é‡å¤æ£€æŸ¥**: é˜²æ­¢é‡å¤æ‰«ç ç¡®è®¤
6. **âœ… çŠ¶æ€æ›´æ–°**: æ›´æ–°è®¢å•çŠ¶æ€ä¸º `dined`
7. **âœ… æ—¥å¿—è®°å½•**: åˆ›å»ºç¡®è®¤å°±é¤æ—¥å¿—ï¼Œç±»å‹ä¸º `qr`
8. **âœ… æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿æ‰€æœ‰ç›¸å…³è¡¨çš„æ•°æ®åŒæ­¥æ›´æ–°

### æ‰«ç ç¡®è®¤çš„æ•°æ®å˜åŒ–

**æ‰«ç å‰**:
- `dining_orders.diningStatus = 'ordered'`
- `dining_orders.actualDiningTime = null`
- `dining_confirmation_logs` æ— è®°å½•

**æ‰«ç å**:
- `dining_orders.diningStatus = 'dined'` âœ…
- `dining_orders.actualDiningTime = 'æ‰«ç æ—¶é—´'` âœ…
- `dining_confirmation_logs` æ–°å¢è®°å½•ï¼Œ`confirmationType = 'qr'` âœ…
- `dining_registrations` æ–°å¢æ‰«ç ç™»è®°è®°å½• âœ…

## ğŸ“Š æ€»ç»“

**æ˜¯çš„ï¼Œæ‰«ç è¿‡ç¨‹å®Œå…¨å¯ä»¥ç¡®è®¤å°±é¤ï¼**

ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„å›ºå®šäºŒç»´ç æ‰«ç ç¡®è®¤å°±é¤åŠŸèƒ½ï¼š

- âœ… **å›ºå®šäºŒç»´ç **: `DINING_QR_MAIN_001` ä¾›æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨
- âœ… **å›¾ç‰‡ç”Ÿæˆ**: åç«¯æä¾›äºŒç»´ç å›¾ç‰‡ç”Ÿæˆæ¥å£
- âœ… **æ‰«ç ç¡®è®¤**: å®Œæ•´çš„æ‰«ç ç¡®è®¤å°±é¤æµç¨‹
- âœ… **çŠ¶æ€æ›´æ–°**: è‡ªåŠ¨æ›´æ–°å°±é¤çŠ¶æ€å’Œåˆ›å»ºæ—¥å¿—
- âœ… **æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿æ‰€æœ‰ç›¸å…³æ•°æ®åŒæ­¥æ›´æ–°
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æç¤ºå’Œä¸šåŠ¡è§„åˆ™éªŒè¯

ç”¨æˆ·åªéœ€è¦æ‰«æå›ºå®šçš„äºŒç»´ç ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰å¿…è¦çš„ç¡®è®¤æ­¥éª¤ã€‚
